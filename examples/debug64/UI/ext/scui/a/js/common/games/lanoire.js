define("common/games/lanoire",["jquery","common/xhr","utils","common/datafunctions","setup.environment.utils","common/jTweetsAnywhere-1.2.1/twitter"],function(t,e,a,s,o,n){var r={},l=",2827-2851,2855-2876,2880-2892,2897,2898,2907-2945,2952-2967,2972-2975,2982-2993,2997-3002,3015-3037,3044-3047,3051,3052,3053,3056,3057,3058,3063-3070,3076,3077,3078",i=",2852,2853,2854,2877,2878,2879,2893,2894,2895,2896,2899-2906,2946,2947,2948,2949,2950,2951,2968,2969,2970,2971,2976-2981,2994,2995,2996,3003-3014,3038-3043,3048,3049,3050,3054,3055,3059-3062,3071-3075",m="2231,2230,3,2228,2229,2204,7,8,9,840,888,911,934,972,980,1053,1141,1214,1307,1410,1418,1501,1584,1642,1755,1843,1896,1949,1972,2070,2148,2186"+l+i;return r.statIds=a.expandDashString(m),r.LoadHomeScreen=function(){o.isOnline()&&r.GetCommunityStatsJS(),n.GetTweets()},r.GetCommunityStatsJS=function(){var t={env:globals.rosEnvironment,title:globals.titleName,version:globals.RosTitleVersion,platformId:globals.platformId,rosTitleName:globals.titleName,statIds:r.statIds};a.WriteDebugLog("GetCommunityStatsJS","options",JSON.stringify(t)),e.ajax({type:"POST",url:a.getApiUrl("/api/"+globals.titleName+"/getcommunitystats"),services:["stats"],data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",silentFail:!0,disableSlowMsg:!0,requestDescription:"GetCommunityStats",success:function(t){"undefined"!=typeof t&&null!=t&&void 0!=t.d&&t.Status?r.ProcessCommunityStats(t):r.GetCommunityStatsJSLocal()},error:function(t,e,s){a.WriteDebugLog("GetCommunityStatsJS","ERROR",s),a.WriteDebugLog("GetCommunityStatsJS","ERROR status",e),a.WriteDebugLog("GetCommunityStatsJS","ERROR responseText",t.responseText,a.logType.error,a.logController[globals.titleName]),r.GetCommunityStatsJSLocal()}})},r.GetCommunityStatsJSLocal=function(){a.WriteDebugLog("GetCommunityStatsJSLocal","",""),e.ajax({type:"GET",url:globals.baseAssetUrl+"xml/"+globals.titleName+"/CommunityStats.xml",dataType:"json",success:function(t){r.ProcessCommunityStats(t)},error:function(e,s,o){a.WriteDebugLog("GetCommunityStatsJSLocal","ERROR",o,a.logType.error,a.logController[globals.titleName]);try{t(this).stopPropagation()}catch(n){}}})},r.ProcessCommunityStats=function(e){if("undefined"!=typeof e&&null!=e&&"undefined"!=e.d&&(a.WriteDebugLog("GetCommunityStatsJS","data.d",e.d),"ERROR"!=e.d.substring(0,5).toUpperCase())){var s=r.statIds.split(","),o=e.d.split(","),n=0,l=0,m=100;i=a.expandDashString(i),a.WriteDebugLog("GetCommunityStatsJS","femalesTrustedIds",i);for(var d=0,u=0,g=0;g<s.length;g++){var S=parseInt(s[g],10);if(S>2227&&2232>S){var c=Math.round(100*o[g],0);t("#trendStat"+s[g]).html(c),m-=c}else if(S>2826&&3079>S){var y=","+s[g];-1!=i.indexOf(y)?u+=Math.round(o[g],0):d+=Math.round(o[g],0)}else t("#trendStat"+s[g]).html(a.addCommas(o[g]));if(S>839&&2187>S){var f=parseInt(o[g],10);f>l&&(n=s[g],l=f)}}n>0&&(t("#homefeedPanel .communityWrapperNum .mostfailedcase div.homeListInner h3").css("background-image","url("+globals.baseUrl+"images/lanoire/caseTitles/"+n+".png)"),t("#trendStat9").html(a.addCommas(l))),t("#trendStat3").html(m),t("#trendStat7").html(a.addCommas(d)),t("#trendStat8").html(a.addCommas(u)),("undefined"!=typeof o[s.length]||null!=o[s.length])&&t("#statsDate").html(a.localizedDate(o[s.length],"LLL"))}},r.LoadPlayerStats=function(){if(a.WriteDebugLog("LoadGameStats","",""),t("#statsPanel").hasClass("compared"))return o.removeLoading("statsPanel"),void t("#awardsLink2").removeClass("disabled");var e=o.CallGameMethodAsync("RGSC_GET_STATS_DATA",null,"RGSC_GET_STATS_DATA_DEMO");e.done(function(e){var s=t("#statsbody");if(e){a.WriteDebugLog("LoadGameStats","statsDataString",e),s.html(""),t("#statsPanel").find(".titleRowDetail").html("");for(var n=e.split(","),r="",l=0,i=n.length-1;i>l;l+=2)r+='<tr><td class="col1">'+n[l]+'</td><td class="col2">'+n[l+1]+"</td></tr>";s.append(r)}else a.WriteDebugLog("LoadPlayerStats","statsDataString","statsDataString is null");s.find("tr").length<1&&s.html('<tr><td class="col1">'+o.getError("NoStatsExist")+'</td><td class="col2 "></td></tr>'),o.resetScrollbar("#statsContainer"),o.removeLoading("statsPanel"),t("#awardsLink2").removeClass("disabled")}),e.fail(function(){a.WriteDebugLog("LAN LoadPlayerStats","RGSC_GET_STATS_DATA","async operation fail",a.logType.error,a.logController.lanoire),t("#statsbody").html('<tr><td class="col1">'+o.getError("ErrorHasOccurred")+'</td><td class="col2 "></td></tr>'),o.removeLoading("statsPanel"),t("#awardsLink2").removeClass("disabled")})},r});